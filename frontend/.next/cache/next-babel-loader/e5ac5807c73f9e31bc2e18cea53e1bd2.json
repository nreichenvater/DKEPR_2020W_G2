{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nico\\\\Dropbox\\\\Studium\\\\5. Semester\\\\DKE PR\\\\frontend\\\\components\\\\auth\\\\withAuth.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport Auth from './authservice';\nexport default function withAuth(SecuredComponent) {\n  return class Authenticated extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        loggedIn: false\n      };\n    }\n\n    componentDidMount() {\n      let loggedInPromise = Auth.isLoggedIn();\n      loggedInPromise.then(function (res) {\n        if (!res) {\n          Router.push(\"/login\");\n        } else {\n          this.setState({\n            loggedIn: true\n          });\n        }\n      });\n    }\n\n    render() {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 17\n        }\n      }, !this.state.loggedIn ? __jsx(\"div\", {\n        className: \"loadingdiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 25\n        }\n      }, \"Loading...\") : __jsx(SecuredComponent, _extends({}, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 27\n        }\n      })));\n    }\n\n  };\n}","map":{"version":3,"sources":["C:/Users/Nico/Dropbox/Studium/5. Semester/DKE PR/frontend/components/auth/withAuth.js"],"names":["React","Component","Router","Auth","withAuth","SecuredComponent","Authenticated","constructor","props","state","loggedIn","componentDidMount","loggedInPromise","isLoggedIn","then","res","push","setState","render"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AAEA,eAAe,SAASC,QAAT,CAAkBC,gBAAlB,EAAmC;AAC9C,SAAO,MAAMC,aAAN,SAA4BL,SAA5B,CAAqC;AAExCM,IAAAA,WAAW,CAACC,KAAD,EAAO;AACd,YAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AACTC,QAAAA,QAAQ,EAAE;AADD,OAAb;AAGH;;AAEDC,IAAAA,iBAAiB,GAAE;AACf,UAAIC,eAAe,GAAGT,IAAI,CAACU,UAAL,EAAtB;AAEAD,MAAAA,eAAe,CAACE,IAAhB,CAAqB,UAASC,GAAT,EAAa;AAC9B,YAAG,CAACA,GAAJ,EAAQ;AACJb,UAAAA,MAAM,CAACc,IAAP,CAAY,QAAZ;AACH,SAFD,MAGK;AACD,eAAKC,QAAL,CAAc;AAAEP,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACH;AACJ,OAPD;AAQH;;AAEDQ,IAAAA,MAAM,GAAE;AACJ,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQ,CAAC,KAAKT,KAAL,CAAWC,QAAZ,GACA;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,GAEE,MAAC,gBAAD,eAAsB,KAAKF,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJV,CADJ;AASH;;AAhCuC,GAA5C;AAkCH","sourcesContent":["import React, { Component } from 'react';\r\nimport Router from 'next/router';\r\nimport Auth from './authservice';\r\n\r\nexport default function withAuth(SecuredComponent){\r\n    return class Authenticated extends Component{\r\n\r\n        constructor(props){\r\n            super(props);\r\n            this.state = {\r\n                loggedIn: false\r\n            }\r\n        }\r\n\r\n        componentDidMount(){\r\n            let loggedInPromise = Auth.isLoggedIn();\r\n            \r\n            loggedInPromise.then(function(res){ \r\n                if(!res){\r\n                    Router.push(\"/login\");\r\n                }\r\n                else {\r\n                    this.setState({ loggedIn: true });\r\n                }\r\n            });\r\n        }\r\n\r\n        render(){\r\n            return (\r\n                <div>\r\n                    {\r\n                        !this.state.loggedIn ?\r\n                        <div className=\"loadingdiv\">Loading...</div>\r\n                        : <SecuredComponent {...this.props} />\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}