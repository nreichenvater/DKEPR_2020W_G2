{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar AuthService = /*#__PURE__*/function () {\n  function AuthService() {\n    _classCallCheck(this, AuthService);\n\n    this.loggedIn = false;\n  }\n\n  _createClass(AuthService, [{\n    key: \"login\",\n    value: function login(body, callback) {\n      console.log(\"sende login request\", body);\n      API.post(\"/login\", body).then(function (res) {\n        if (res.status === 200) {\n          console.log(res);\n          localStorage.setItem('user', res.data.user.mail);\n          localStorage.setItem('Authorization', res.headers.authorization);\n          callback(res);\n        }\n      })[\"catch\"](function (err) {\n        console.log(err);\n        callback(err);\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('Authorization');\n    }\n  }, {\n    key: \"isLoggedIn\",\n    value: function () {\n      var _isLoggedIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  resolve(true);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function isLoggedIn() {\n        return _isLoggedIn.apply(this, arguments);\n      }\n\n      return isLoggedIn;\n    }()\n  }, {\n    key: \"register\",\n    value: function register(mailInput, passwordInput, repeatedPasswordInput, successCallback) {\n      API.post(\"/register\", {\n        mail: mailInput,\n        password: passwordInput,\n        passwordConfirm: repeatedPasswordInput\n      }).then(function (res) {\n        if (res.status === 200) {\n          successCallback(res);\n        }\n      })[\"catch\"](function (err) {\n        successCallback(err);\n      });\n    }\n  }, {\n    key: \"hasToken\",\n    value: function hasToken() {\n      if (localStorage.getItem('Authorization') != null) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      return Object.create({\n        headers: {\n          Authorization: localStorage.getItem('Authorization'),\n          Username: localStorage.getItem('user')\n        }\n      });\n    }\n  }]);\n\n  return AuthService;\n}();\n\nexport default new AuthService();","map":{"version":3,"sources":["C:/Users/Nico/Dropbox/Studium/5. Semester/DKE PR/frontend/components/auth/authservice.js"],"names":["AuthService","loggedIn","body","callback","console","log","API","post","then","res","status","localStorage","setItem","data","user","mail","headers","authorization","err","removeItem","Promise","resolve","reject","mailInput","passwordInput","repeatedPasswordInput","successCallback","password","passwordConfirm","getItem","Object","create","Authorization","Username"],"mappings":";;;;;IAEMA,W;AACF,yBAAa;AAAA;;AACT,SAAKC,QAAL,GAAgB,KAAhB;AACH;;;;0BAEKC,I,EAAMC,Q,EAAS;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCH,IAAnC;AACAI,MAAAA,GAAG,CAACC,IAAJ,WAAmBL,IAAnB,EACCM,IADD,CACM,UAAAC,GAAG,EAAI;AACT,YAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;AAClBN,UAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACAE,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BH,GAAG,CAACI,IAAJ,CAASC,IAAT,CAAcC,IAA3C;AACAJ,UAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCH,GAAG,CAACO,OAAJ,CAAYC,aAAlD;AACAd,UAAAA,QAAQ,CAACM,GAAD,CAAR;AACH;AACJ,OARD,WASO,UAAAS,GAAG,EAAI;AACVd,QAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACAf,QAAAA,QAAQ,CAACe,GAAD,CAAR;AACH,OAZD;AAaH;;;6BAEO;AACJP,MAAAA,YAAY,CAACQ,UAAb,CAAwB,MAAxB;AACAR,MAAAA,YAAY,CAACQ,UAAb,CAAwB,eAAxB;AACH;;;;;;;;;iDAGU,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCD,kBAAAA,OAAO,CAAC,IAAD,CAAP;AACH,iBAFM,C;;;;;;;;;;;;;;;;;;6BA2BFE,S,EAAWC,a,EAAeC,qB,EAAuBC,e,EAAgB;AAElEpB,MAAAA,GAAG,CAACC,IAAJ,cAAsB;AAClBQ,QAAAA,IAAI,EAAEQ,SADY;AAElBI,QAAAA,QAAQ,EAAEH,aAFQ;AAGlBI,QAAAA,eAAe,EAAEH;AAHC,OAAtB,EAKCjB,IALD,CAKM,UAAAC,GAAG,EAAI;AACT,YAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;AAClBgB,UAAAA,eAAe,CAACjB,GAAD,CAAf;AACH;AACJ,OATD,WAUO,UAAAS,GAAG,EAAI;AACVQ,QAAAA,eAAe,CAACR,GAAD,CAAf;AACH,OAZD;AAaP;;;+BAES;AACN,UAAGP,YAAY,CAACkB,OAAb,CAAqB,eAArB,KAAyC,IAA5C,EAAiD;AAC7C,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH;;;gCAEU;AACP,aAAOC,MAAM,CAACC,MAAP,CAAc;AACjBf,QAAAA,OAAO,EAAE;AACLgB,UAAAA,aAAa,EAAErB,YAAY,CAACkB,OAAb,CAAqB,eAArB,CADV;AAELI,UAAAA,QAAQ,EAAEtB,YAAY,CAACkB,OAAb,CAAqB,MAArB;AAFL;AADQ,OAAd,CAAP;AAMH;;;;;;AAGL,eAAe,IAAI7B,WAAJ,EAAf","sourcesContent":["\r\n\r\nclass AuthService {\r\n    constructor(){\r\n        this.loggedIn = false;\r\n    }\r\n\r\n    login(body, callback){\r\n        console.log(\"sende login request\", body);\r\n        API.post(`/login`, body)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                console.log(res);\r\n                localStorage.setItem('user', res.data.user.mail);\r\n                localStorage.setItem('Authorization', res.headers.authorization);\r\n                callback(res);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            callback(err);\r\n        })\r\n    }\r\n\r\n    logout(){\r\n        localStorage.removeItem('user');\r\n        localStorage.removeItem('Authorization');\r\n    }\r\n\r\n    async isLoggedIn(){\r\n        return new Promise((resolve, reject) => {\r\n            resolve(true);\r\n        });\r\n        /*\r\n        console.log(\"checke eingeloggt mit token \" + localStorage.getItem('Authorization'));\r\n        if(this.hasToken()){\r\n            return new Promise((resolve, reject) => {\r\n                API.get('/user', this.getHeader())\r\n                .then(res => {\r\n                    if(res.status === 200){\r\n                        resolve(true);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    localStorage.removeItem('Authorization');\r\n                    localStorage.removeItem('user');\r\n                    resolve(false);\r\n                })\r\n            });\r\n        }\r\n        else {\r\n            console.log(\"kein token\");\r\n            return false;\r\n        } */\r\n    }\r\n\r\n    register(mailInput, passwordInput, repeatedPasswordInput, successCallback){\r\n\r\n            API.post(`/register`, {\r\n                mail: mailInput,\r\n                password: passwordInput,\r\n                passwordConfirm: repeatedPasswordInput\r\n            })\r\n            .then(res => {\r\n                if(res.status === 200){\r\n                    successCallback(res);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                successCallback(err);\r\n            });\r\n    }\r\n\r\n    hasToken(){\r\n        if(localStorage.getItem('Authorization') != null){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getHeader(){\r\n        return Object.create({\r\n            headers: {\r\n                Authorization: localStorage.getItem('Authorization'),\r\n                Username: localStorage.getItem('user')\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default new AuthService();"]},"metadata":{},"sourceType":"module"}