{"ast":null,"code":"import API from '../../api';\n\nclass AuthService {\n  constructor() {\n    this.loggedIn = false;\n  }\n\n  login(body, callback) {\n    console.log(\"sende login request\", body);\n    API.post(`/login`, body).then(res => {\n      if (res.status === 200) {\n        console.log(res);\n        localStorage.setItem('user', res.data.username);\n        localStorage.setItem('Authorization', res.data.token);\n        callback(res);\n      }\n    }).catch(err => {\n      console.log(err);\n      callback(err);\n    });\n  }\n\n  logout() {\n    localStorage.removeItem('user');\n    localStorage.removeItem('Authorization');\n  }\n\n  async isLoggedIn() {\n    console.log(\"checke eingeloggt mit token \" + localStorage.getItem('Authorization'));\n    /*\r\n    if(this.hasToken()){\r\n        return new Promise((resolve, reject) => {\r\n            API.get('/user', this.getHeader())\r\n            .then(res => {\r\n                if(res.status === 200){\r\n                    resolve(true);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                localStorage.removeItem('Authorization');\r\n                localStorage.removeItem('user');\r\n                resolve(false);\r\n            })\r\n        });\r\n    }\r\n    else {\r\n        console.log(\"kein token\");\r\n        return false;\r\n    }\r\n    */\n\n    return new Promise((resolve, reject) => {\n      resolve(true);\n    });\n  }\n\n  register(mailInput, passwordInput, repeatedPasswordInput, successCallback) {\n    API.post(`/register`, {\n      username: mailInput,\n      password: passwordInput,\n      repeatedPassword: repeatedPasswordInput\n    }).then(res => {\n      if (res.status === 200) {\n        successCallback(res);\n      }\n    }).catch(err => {\n      successCallback(err);\n    });\n  }\n\n  hasToken() {\n    if (localStorage.getItem('Authorization') != null) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getHeader() {\n    const token = \"Bearer \" + localStorage.getItem('Authorization');\n    return Object.create({\n      headers: {\n        Authorization: token,\n        user: localStorage.getItem('user')\n      }\n    });\n  }\n\n}\n\nexport default new AuthService();","map":{"version":3,"sources":["C:/Users/Nico/Dropbox/Studium/5. Semester/DKE PR/frontend/components/auth/authservice.js"],"names":["API","AuthService","constructor","loggedIn","login","body","callback","console","log","post","then","res","status","localStorage","setItem","data","username","token","catch","err","logout","removeItem","isLoggedIn","getItem","Promise","resolve","reject","register","mailInput","passwordInput","repeatedPasswordInput","successCallback","password","repeatedPassword","hasToken","getHeader","Object","create","headers","Authorization","user"],"mappings":"AACA,OAAOA,GAAP,MAAgB,WAAhB;;AAEA,MAAMC,WAAN,CAAkB;AACdC,EAAAA,WAAW,GAAE;AACT,SAAKC,QAAL,GAAgB,KAAhB;AACH;;AAEDC,EAAAA,KAAK,CAACC,IAAD,EAAOC,QAAP,EAAgB;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCH,IAAnC;AACAL,IAAAA,GAAG,CAACS,IAAJ,CAAU,QAAV,EAAmBJ,IAAnB,EACCK,IADD,CACMC,GAAG,IAAI;AACT,UAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;AAClBL,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACAE,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BH,GAAG,CAACI,IAAJ,CAASC,QAAtC;AACAH,QAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCH,GAAG,CAACI,IAAJ,CAASE,KAA/C;AACAX,QAAAA,QAAQ,CAACK,GAAD,CAAR;AACH;AACJ,KARD,EASCO,KATD,CASOC,GAAG,IAAI;AACVZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,GAAZ;AACAb,MAAAA,QAAQ,CAACa,GAAD,CAAR;AACH,KAZD;AAaH;;AAEDC,EAAAA,MAAM,GAAE;AACJP,IAAAA,YAAY,CAACQ,UAAb,CAAwB,MAAxB;AACAR,IAAAA,YAAY,CAACQ,UAAb,CAAwB,eAAxB;AACH;;AAED,QAAMC,UAAN,GAAkB;AACdf,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiCK,YAAY,CAACU,OAAb,CAAqB,eAArB,CAA7C;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/BD,MAAAA,OAAO,CAAC,IAAD,CAAP;AACH,KAFC,CAAP;AAGF;;AAEDE,EAAAA,QAAQ,CAACC,SAAD,EAAYC,aAAZ,EAA2BC,qBAA3B,EAAkDC,eAAlD,EAAkE;AAElE/B,IAAAA,GAAG,CAACS,IAAJ,CAAU,WAAV,EAAsB;AAClBO,MAAAA,QAAQ,EAAEY,SADQ;AAElBI,MAAAA,QAAQ,EAAEH,aAFQ;AAGlBI,MAAAA,gBAAgB,EAAEH;AAHA,KAAtB,EAKCpB,IALD,CAKMC,GAAG,IAAI;AACT,UAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;AAClBmB,QAAAA,eAAe,CAACpB,GAAD,CAAf;AACH;AACJ,KATD,EAUCO,KAVD,CAUOC,GAAG,IAAI;AACVY,MAAAA,eAAe,CAACZ,GAAD,CAAf;AACH,KAZD;AAaP;;AAEDe,EAAAA,QAAQ,GAAE;AACN,QAAGrB,YAAY,CAACU,OAAb,CAAqB,eAArB,KAAyC,IAA5C,EAAiD;AAC7C,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH;;AAEDY,EAAAA,SAAS,GAAE;AACP,UAAMlB,KAAK,GAAG,YAAYJ,YAAY,CAACU,OAAb,CAAqB,eAArB,CAA1B;AACA,WAAOa,MAAM,CAACC,MAAP,CAAc;AACjBC,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAEtB,KADV;AAELuB,QAAAA,IAAI,EAAE3B,YAAY,CAACU,OAAb,CAAqB,MAArB;AAFD;AADQ,KAAd,CAAP;AAMH;;AAxFa;;AA2FlB,eAAe,IAAItB,WAAJ,EAAf","sourcesContent":["\r\nimport API from '../../api';\r\n\r\nclass AuthService {\r\n    constructor(){\r\n        this.loggedIn = false;\r\n    }\r\n\r\n    login(body, callback){\r\n        console.log(\"sende login request\", body);\r\n        API.post(`/login`, body)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                console.log(res);\r\n                localStorage.setItem('user', res.data.username);\r\n                localStorage.setItem('Authorization', res.data.token);\r\n                callback(res);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            callback(err);\r\n        })\r\n    }\r\n\r\n    logout(){\r\n        localStorage.removeItem('user');\r\n        localStorage.removeItem('Authorization');\r\n    }\r\n\r\n    async isLoggedIn(){\r\n        console.log(\"checke eingeloggt mit token \" + localStorage.getItem('Authorization'));\r\n        /*\r\n        if(this.hasToken()){\r\n            return new Promise((resolve, reject) => {\r\n                API.get('/user', this.getHeader())\r\n                .then(res => {\r\n                    if(res.status === 200){\r\n                        resolve(true);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    localStorage.removeItem('Authorization');\r\n                    localStorage.removeItem('user');\r\n                    resolve(false);\r\n                })\r\n            });\r\n        }\r\n        else {\r\n            console.log(\"kein token\");\r\n            return false;\r\n        }\r\n        */\r\n       return new Promise((resolve, reject) => {\r\n                resolve(true);\r\n            });\r\n    }\r\n\r\n    register(mailInput, passwordInput, repeatedPasswordInput, successCallback){\r\n\r\n            API.post(`/register`, {\r\n                username: mailInput,\r\n                password: passwordInput,\r\n                repeatedPassword: repeatedPasswordInput\r\n            })\r\n            .then(res => {\r\n                if(res.status === 200){\r\n                    successCallback(res);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                successCallback(err);\r\n            });\r\n    }\r\n\r\n    hasToken(){\r\n        if(localStorage.getItem('Authorization') != null){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getHeader(){\r\n        const token = \"Bearer \" + localStorage.getItem('Authorization');\r\n        return Object.create({\r\n            headers: {\r\n                Authorization: token,\r\n                user: localStorage.getItem('user')\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default new AuthService();"]},"metadata":{},"sourceType":"module"}