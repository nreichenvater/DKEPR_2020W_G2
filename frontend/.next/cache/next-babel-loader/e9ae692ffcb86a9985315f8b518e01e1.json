{"ast":null,"code":"class AuthService {\n  constructor() {\n    this.loggedIn = false;\n  }\n\n  login(body, callback) {\n    console.log(\"sende login request\", body);\n    API.post(`/login`, body).then(res => {\n      if (res.status === 200) {\n        console.log(res);\n        localStorage.setItem('user', res.data.user.mail);\n        localStorage.setItem('Authorization', res.headers.authorization);\n        callback(res);\n      }\n    }).catch(err => {\n      console.log(err);\n      callback(err);\n    });\n  }\n\n  logout() {\n    localStorage.removeItem('user');\n    localStorage.removeItem('Authorization');\n  }\n\n  async isLoggedIn() {\n    console.log(\"checke eingeloggt mit token \" + localStorage.getItem('Authorization'));\n\n    if (this.hasToken()) {\n      return new Promise((resolve, reject) => {\n        API.get('/user', this.getHeader()).then(res => {\n          if (res.status === 200) {\n            resolve(true);\n          }\n        }).catch(err => {\n          console.log(err);\n          localStorage.removeItem('Authorization');\n          localStorage.removeItem('user');\n          resolve(false);\n        });\n      });\n    } else {\n      console.log(\"kein token\");\n      return false;\n    }\n  }\n\n  register(mailInput, passwordInput, repeatedPasswordInput, successCallback) {\n    API.post(`/register`, {\n      mail: mailInput,\n      password: passwordInput,\n      passwordConfirm: repeatedPasswordInput\n    }).then(res => {\n      if (res.status === 200) {\n        successCallback(res);\n      }\n    }).catch(err => {\n      successCallback(err);\n    });\n  }\n\n  hasToken() {\n    if (localStorage.getItem('Authorization') != null) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getHeader() {\n    return Object.create({\n      headers: {\n        Authorization: localStorage.getItem('Authorization'),\n        Username: localStorage.getItem('user')\n      }\n    });\n  }\n\n}\n\nexport default new AuthService();","map":{"version":3,"sources":["C:/Users/Nico/Dropbox/Studium/5. Semester/DKE PR/frontend/components/auth/authservice.js"],"names":["AuthService","constructor","loggedIn","login","body","callback","console","log","API","post","then","res","status","localStorage","setItem","data","user","mail","headers","authorization","catch","err","logout","removeItem","isLoggedIn","getItem","hasToken","Promise","resolve","reject","get","getHeader","register","mailInput","passwordInput","repeatedPasswordInput","successCallback","password","passwordConfirm","Object","create","Authorization","Username"],"mappings":"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","sourcesContent":["\r\n\r\nclass AuthService {\r\n    constructor(){\r\n        this.loggedIn = false;\r\n    }\r\n\r\n    login(body, callback){\r\n        console.log(\"sende login request\", body);\r\n        API.post(`/login`, body)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                console.log(res);\r\n                localStorage.setItem('user', res.data.user.mail);\r\n                localStorage.setItem('Authorization', res.headers.authorization);\r\n                callback(res);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            callback(err);\r\n        })\r\n    }\r\n\r\n    logout(){\r\n        localStorage.removeItem('user');\r\n        localStorage.removeItem('Authorization');\r\n    }\r\n\r\n    async isLoggedIn(){\r\n        console.log(\"checke eingeloggt mit token \" + localStorage.getItem('Authorization'));\r\n        if(this.hasToken()){\r\n            return new Promise((resolve, reject) => {\r\n                API.get('/user', this.getHeader())\r\n                .then(res => {\r\n                    if(res.status === 200){\r\n                        resolve(true);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    localStorage.removeItem('Authorization');\r\n                    localStorage.removeItem('user');\r\n                    resolve(false);\r\n                })\r\n            });\r\n        }\r\n        else {\r\n            console.log(\"kein token\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n    register(mailInput, passwordInput, repeatedPasswordInput, successCallback){\r\n\r\n            API.post(`/register`, {\r\n                mail: mailInput,\r\n                password: passwordInput,\r\n                passwordConfirm: repeatedPasswordInput\r\n            })\r\n            .then(res => {\r\n                if(res.status === 200){\r\n                    successCallback(res);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                successCallback(err);\r\n            });\r\n    }\r\n\r\n    hasToken(){\r\n        if(localStorage.getItem('Authorization') != null){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getHeader(){\r\n        return Object.create({\r\n            headers: {\r\n                Authorization: localStorage.getItem('Authorization'),\r\n                Username: localStorage.getItem('user')\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default new AuthService();"]},"metadata":{},"sourceType":"module"}