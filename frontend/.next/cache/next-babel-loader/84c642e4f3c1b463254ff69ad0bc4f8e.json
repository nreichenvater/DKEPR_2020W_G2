{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Nico\\\\Dropbox\\\\Studium\\\\5. Semester\\\\DKE PR\\\\frontend\\\\components\\\\auth\\\\withAuth.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport Auth from './authservice';\nexport default function withAuth(SecuredComponent) {\n  return /*#__PURE__*/function (_Component) {\n    _inherits(Authenticated, _Component);\n\n    var _super = _createSuper(Authenticated);\n\n    function Authenticated(props) {\n      var _this;\n\n      _classCallCheck(this, Authenticated);\n\n      _this = _super.call(this, props);\n      _this.state = {\n        loggedIn: false\n      };\n      return _this;\n    }\n\n    _createClass(Authenticated, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var loggedInPromise = Auth.isLoggedIn();\n        loggedInPromise.then(function (res) {\n          if (!res) {\n            Router.push(\"/login\");\n          }\n        });\n        this.setState({\n          loggedIn: true\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 17\n          }\n        }, !this.state.loggedIn ? __jsx(\"div\", {\n          className: \"loadingdiv\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 25\n          }\n        }, \"Loading...\") : __jsx(SecuredComponent, _extends({}, this.props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 27\n          }\n        })));\n      }\n    }]);\n\n    return Authenticated;\n  }(Component);\n}","map":{"version":3,"sources":["C:/Users/Nico/Dropbox/Studium/5. Semester/DKE PR/frontend/components/auth/withAuth.js"],"names":["React","Component","Router","Auth","withAuth","SecuredComponent","props","state","loggedIn","loggedInPromise","isLoggedIn","then","res","push","setState"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AAEA,eAAe,SAASC,QAAT,CAAkBC,gBAAlB,EAAmC;AAC9C;AAAA;;AAAA;;AAEI,2BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,gCAAMA,KAAN;AACA,YAAKC,KAAL,GAAa;AACTC,QAAAA,QAAQ,EAAE;AADD,OAAb;AAFc;AAKjB;;AAPL;AAAA;AAAA,0CASuB;AACf,YAAIC,eAAe,GAAGN,IAAI,CAACO,UAAL,EAAtB;AAEAD,QAAAA,eAAe,CAACE,IAAhB,CAAqB,UAASC,GAAT,EAAa;AAC9B,cAAG,CAACA,GAAJ,EAAQ;AACJV,YAAAA,MAAM,CAACW,IAAP,CAAY,QAAZ;AACH;AACJ,SAJD;AAMA,aAAKC,QAAL,CAAc;AAAEN,UAAAA,QAAQ,EAAE;AAAZ,SAAd;AACH;AAnBL;AAAA;AAAA,+BAqBY;AACJ,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEQ,CAAC,KAAKD,KAAL,CAAWC,QAAZ,GACA;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,GAEE,MAAC,gBAAD,eAAsB,KAAKF,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJV,CADJ;AASH;AA/BL;;AAAA;AAAA,IAAmCL,SAAnC;AAiCH","sourcesContent":["import React, { Component } from 'react';\r\nimport Router from 'next/router';\r\nimport Auth from './authservice';\r\n\r\nexport default function withAuth(SecuredComponent){\r\n    return class Authenticated extends Component{\r\n\r\n        constructor(props){\r\n            super(props);\r\n            this.state = {\r\n                loggedIn: false\r\n            }\r\n        }\r\n\r\n        componentDidMount(){\r\n            let loggedInPromise = Auth.isLoggedIn();\r\n            \r\n            loggedInPromise.then(function(res){ \r\n                if(!res){\r\n                    Router.push(\"/login\");\r\n                }\r\n            });\r\n            \r\n            this.setState({ loggedIn: true });\r\n        }\r\n\r\n        render(){\r\n            return (\r\n                <div>\r\n                    {\r\n                        !this.state.loggedIn ?\r\n                        <div className=\"loadingdiv\">Loading...</div>\r\n                        : <SecuredComponent {...this.props} />\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}